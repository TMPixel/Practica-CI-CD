"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1246],{1246:(D,c,i)=>{i.r(c),i.d(c,{ProfilePageModule:()=>Y});var d=i(177),a=i(4341),u=i(1075),g=i(4964),m=i(467),e=i(4438),p=i(5297),v=i(5265),P=i(9381),h=i(3683),b=i(9981);function y(o,l){1&o&&(e.j41(0,"div")(1,"ion-label",10),e.EFF(2,"El correo es requerido"),e.k0s()())}function G(o,l){1&o&&(e.j41(0,"div")(1,"ion-label",10),e.EFF(2,"Ingrese un correo valido"),e.k0s()())}function F(o,l){if(1&o&&(e.j41(0,"div",8),e.DNE(1,y,3,0,"div",9)(2,G,3,0,"div",9),e.k0s()),2&o){const n=e.XpG();e.R7$(),e.Y8G("ngIf",null==n.form.controls.email.errors?null:n.form.controls.email.errors.required),e.R7$(),e.Y8G("ngIf",null==n.form.controls.email.errors?null:n.form.controls.email.errors.email)}}function I(o,l){1&o&&(e.j41(0,"div")(1,"ion-label",10),e.EFF(2,"El nombre es requerido"),e.k0s()())}function T(o,l){1&o&&(e.j41(0,"div")(1,"ion-label",10),e.EFF(2,"El nombre debe ser mayor a 6 caracteres"),e.k0s()())}function R(o,l){if(1&o&&(e.j41(0,"div",8),e.DNE(1,I,3,0,"div",9)(2,T,3,0,"div",9),e.k0s()),2&o){const n=e.XpG();e.R7$(),e.Y8G("ngIf",null==n.form.controls.name.errors?null:n.form.controls.name.errors.required),e.R7$(),e.Y8G("ngIf",null==n.form.controls.name.errors?null:n.form.controls.name.errors.minLength)}}const E=[{path:"",component:(()=>{var o;class l{constructor(){this.form=new a.gE({uid:new a.MJ(""),name:new a.MJ("",[a.k0.required,a.k0.minLength(6)]),email:new a.MJ("",[a.k0.required,a.k0.email])}),this.utils=(0,e.WQX)(v.T),this.firebase=(0,e.WQX)(p.f)}ngOnInit(){this.getData()}submit(){var r=this;return(0,m.A)(function*(){r.updateDisplayName()})()}getData(){this.form.patchValue({email:this.utils.getFromLocalStorage("user").email,name:this.utils.getFromLocalStorage("user").name,uid:this.utils.getFromLocalStorage("user").uid})}updateDisplayName(){var r=this;return(0,m.A)(function*(){const t=yield r.utils.loading();yield t.present(),r.firebase.updateUserProfile(r.form.value.name).then(()=>{r.setUserInfo(r.form.value.uid),r.utils.showToast({message:"Nombre actualizado",color:"success",position:"middle",duration:3e3,icon:"alert-circle-outline"})}).catch(s=>{r.utils.showToast({message:s.message,color:"danger",position:"middle",duration:3e3,icon:"alert-circle-outline"})}).finally(()=>{t.dismiss()})})()}setUserInfo(r){var t=this;return(0,m.A)(function*(){t.firebase.setDocument(`users/${r}`,t.form.value).then(function(){var f=(0,m.A)(function*(j){t.utils.saveInLocalStorage("user",t.form.value)});return function(j){return f.apply(this,arguments)}}()).catch(f=>{t.utils.showToast({message:f.message,color:"danger",position:"middle",duration:3e3,icon:"alert-circle-outline"})})})()}}return(o=l).\u0275fac=function(r){return new(r||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-profile"]],decls:11,vars:9,consts:[["title","Editar Perfil"],[3,"fullscreen"],[1,"d-flex-center"],[1,"auth-form",3,"ngSubmit","keypress.enter","formGroup"],["autocomplete","email","icon","mail-outline","type","email","label","Correo",3,"control"],["class","validators",4,"ngIf"],["autocomplete","name","icon","person","type","text","label","Nombre",3,"control"],["type","submit","mode","ios","expand","block","shape","round",1,"submit",3,"disabled"],[1,"validators"],[4,"ngIf"],["color","danger"]],template:function(r,t){1&r&&(e.nrm(0,"app-header",0),e.j41(1,"ion-content",1)(2,"div",2)(3,"form",3),e.bIt("ngSubmit",function(){return t.submit()})("keypress.enter",function(){return t.submit()}),e.nrm(4,"app-logo")(5,"app-custom-input",4),e.DNE(6,F,3,2,"div",5),e.nrm(7,"app-custom-input",6),e.DNE(8,R,3,2,"div",5),e.j41(9,"ion-button",7),e.EFF(10," Actualizar "),e.k0s()()()()),2&r&&(e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("formGroup",t.form),e.R7$(2),e.xc7("pointer-events","none"),e.Y8G("control",t.form.controls.email),e.R7$(),e.Y8G("ngIf",t.form.controls.email.errors&&t.form.controls.email.touched),e.R7$(),e.Y8G("control",t.form.controls.name),e.R7$(),e.Y8G("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),e.R7$(),e.Y8G("disabled",t.form.invalid))},dependencies:[d.bT,a.qT,a.cb,u.Jm,u.W9,u.he,P.l,h.H,b.Z,a.j4]}),l})()}];let $=(()=>{var o;class l{}return(o=l).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.iI.forChild(E),g.iI]}),l})();var M=i(3887);let Y=(()=>{var o;class l{}return(o=l).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[d.MD,a.YN,u.bv,$,M.G]}),l})()}}]);