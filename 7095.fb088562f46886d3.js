"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7095],{7095:(w,m,r)=>{r.r(m),r.d(m,{ProfilePageModule:()=>G});var f=r(177),i=r(4341),s=r(1075),h=r(4964),g=r(467),e=r(4438),c=r(5407),A=(r(7440),r(2214),r(99));const C=(0,c.S3)(A.xI,!0);var T=r(1662),y=r(5265),M=r(9381),k=r(9981),U=r(3683);function S(n,o){1&n&&(e.j41(0,"div"),e.EFF(1,"El nombre es requerido"),e.k0s())}function F(n,o){1&n&&(e.j41(0,"div"),e.EFF(1,"Ingrese al menos 8 caracteres"),e.k0s())}function N(n,o){if(1&n&&(e.j41(0,"div",8),e.DNE(1,S,2,0,"div",9)(2,F,2,0,"div",9),e.k0s()),2&n){const u=e.XpG();e.R7$(),e.Y8G("ngIf",null==u.form.controls.name.errors?null:u.form.controls.name.errors.required),e.R7$(),e.Y8G("ngIf",null==u.form.controls.name.errors?null:u.form.controls.name.errors.minlenght)}}const D=[{path:"",component:(()=>{var n;class o{constructor(){this.utils=(0,e.WQX)(y.T),this.firebase=(0,e.WQX)(T.f),this.form=new i.gE({uid:new i.MJ(""),name:new i.MJ("",[i.k0.required,i.k0.minLength(4)]),email:new i.MJ({value:"",disabled:!0})})}ngOnInit(){this.loadUserInfo()}loadUserInfo(){var t=this;return(0,g.A)(function*(){var l;const a=t.utils.getFromLocalStorage("user");a&&t.form.patchValue(a);const P=(null==a?void 0:a.uid)||(null===(l=C().currentUser)||void 0===l?void 0:l.uid);if(P){const v=yield t.firebase.getDocument(`users/${P}`);v&&t.form.patchValue(v)}})()}submit(){var t=this;return(0,g.A)(function*(){if(t.form.valid){const l=t.form.value;try{yield t.firebase.updateProfile(l.name),yield t.firebase.setDocument(`users/${l.uid}`,l),t.utils.saveInLocalStorage("user",l),t.utils.routerLink("main/home")}catch(a){t.utils.showToast({message:a.message,color:"danger",position:"middle",duration:3e3,icon:"alert-circle-outline"})}}})()}}return(n=o).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["app-profile"]],decls:11,vars:5,consts:[["title","Mi perfil"],[3,"fullscreen"],[1,"d-flex-center"],[1,"auth-form",3,"ngSubmit","keypres.enter","formGroup"],["autocomplete","name","icon","person-outline","type","text","label","Usuario",3,"control"],["class","validators",4,"ngIf"],["autocomplete","email","icon","mail-outline","type","email","label","Correo",3,"control"],["expand","block","mode","ios","type","submit","fill","outline","shape","round"],[1,"validators"],[4,"ngIf"]],template:function(t,l){1&t&&(e.nrm(0,"app-header",0),e.j41(1,"ion-content",1)(2,"div",2)(3,"form",3),e.bIt("ngSubmit",function(){return l.submit()})("keypres.enter",function(){return l.submit()}),e.nrm(4,"app-logo")(5,"app-custom-input",4),e.DNE(6,N,3,2,"div",5),e.nrm(7,"app-custom-input",6),e.EFF(8,"a "),e.j41(9,"ion-button",7),e.EFF(10,"Guardar datos"),e.k0s()()()()),2&t&&(e.R7$(),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("formGroup",l.form),e.R7$(2),e.Y8G("control",l.form.controls.name),e.R7$(),e.Y8G("ngIf",l.form.controls.name.errors&&l.form.controls.name.touched),e.R7$(),e.Y8G("control",l.form.controls.email))},dependencies:[f.bT,i.qT,i.cb,s.Jm,s.W9,M.l,k.Z,U.H,i.j4]}),o})()}];let b=(()=>{var n;class o{}return(n=o).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[h.iI.forChild(D),h.iI]}),o})();var L=r(3887);let G=(()=>{var n;class o{}return(n=o).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[f.MD,i.YN,s.bv,b,L.G]}),o})()}}]);